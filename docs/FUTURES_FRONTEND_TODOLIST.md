# æœŸè´§ç­–ç•¥å‰ç«¯é›†æˆ - å¼€å‘ TodoList

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¶é—´**: 2026-02-04  
> **å…³è”éœ€æ±‚**: [FUTURES_FRONTEND_REQUIREMENTS.md](./FUTURES_FRONTEND_REQUIREMENTS.md)  
> **æ€»é¢„è®¡å·¥æ—¶**: çº¦19å°æ—¶

---

## ğŸ“‹ ä»»åŠ¡æ€»è§ˆ

| é˜¶æ®µ | ä»»åŠ¡åç§° | ä¼˜å…ˆçº§ | é¢„è®¡å·¥æ—¶ | çŠ¶æ€ |
|------|---------|--------|----------|------|
| 1 | æ•°æ®åº“æ¨¡å‹å±‚ | P0 | 2å°æ—¶ | âœ… å·²å®Œæˆ |
| 2 | åç«¯APIè·¯ç”± | P0 | 4å°æ—¶ | âœ… å·²å®Œæˆ |
| 3 | å‰ç«¯APIå°è£… | P0 | 1å°æ—¶ | âœ… å·²å®Œæˆ |
| 4 | å‰ç«¯é¡µé¢ä¸»æ¡†æ¶ | P0 | 3å°æ—¶ | âœ… å·²å®Œæˆ |
| 5 | å‰ç«¯å­ç»„ä»¶å¼€å‘ | P1 | 7å°æ—¶ | âœ… å·²å®Œæˆ |
| 6 | é›†æˆä¸æµ‹è¯• | P1 | 2å°æ—¶ | âœ… å·²å®Œæˆ |

---

## é˜¶æ®µ1: æ•°æ®åº“æ¨¡å‹å±‚ (P0)

### 1.1 åˆ›å»ºæœŸè´§æ•°æ®è¡¨æ¨¡å‹
- **æ–‡ä»¶**: `backend_api_python/app/models/futures.py`
- **é¢„è®¡å·¥æ—¶**: 1.5å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] åˆ›å»º `FuturesStrategyConfig` æ¨¡å‹ (ç­–ç•¥é…ç½®è¡¨)
- [ ] åˆ›å»º `FuturesPosition` æ¨¡å‹ (æŒä»“è¡¨)
- [ ] åˆ›å»º `FuturesTrade` æ¨¡å‹ (äº¤æ˜“è®°å½•è¡¨)
- [ ] åˆ›å»º `FuturesSignal` æ¨¡å‹ (ä¿¡å·è®°å½•è¡¨)

**æ¨¡å‹å­—æ®µå‚è€ƒ:**
```python
# FuturesStrategyConfig
- id, symbols(JSON), drop_threshold_1, drop_threshold_2
- monitoring_start, monitoring_end, max_position
- notification_channels(JSON), telegram_chat_id, wechat_webhook
- is_running, created_at, updated_at

# FuturesPosition
- id, symbol, direction, quantity, entry_price, entry_time
- status, close_price, close_time, realized_pnl, created_at

# FuturesTrade
- id, symbol, trade_type, price, quantity, margin, fee
- pnl, signal_reason, trade_time, created_at

# FuturesSignal
- id, symbol, signal_type, trigger_price, base_price
- drop_pct, is_executed, signal_time, created_at
```

---

### 1.2 æ•°æ®åº“è¿ç§»
- **é¢„è®¡å·¥æ—¶**: 0.5å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] åˆ›å»ºæ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] æ‰§è¡Œè¿ç§»ï¼Œç”Ÿæˆ4å¼ è¡¨
- [ ] æ’å…¥é»˜è®¤ç­–ç•¥é…ç½®æ•°æ®

---

## é˜¶æ®µ2: åç«¯APIè·¯ç”± (P0)

### 2.1 åˆ›å»ºè·¯ç”±æ–‡ä»¶
- **æ–‡ä»¶**: `backend_api_python/app/routes/cn_futures.py`
- **é¢„è®¡å·¥æ—¶**: 4å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**

#### 2.1.1 åŸºç¡€æ•°æ®æ¥å£
- [ ] `GET /contracts` - è·å–åˆçº¦åˆ—è¡¨
- [ ] `GET /quote` - è·å–å®æ—¶è¡Œæƒ…
- [ ] `GET /kline` - è·å–Kçº¿æ•°æ®

#### 2.1.2 è®¡ç®—æ¥å£
- [ ] `POST /calculate/margin` - è®¡ç®—ä¿è¯é‡‘
- [ ] `POST /calculate/fee` - è®¡ç®—æ‰‹ç»­è´¹

#### 2.1.3 ç­–ç•¥æ§åˆ¶æ¥å£
- [ ] `GET /strategy/status` - è·å–ç­–ç•¥çŠ¶æ€
- [ ] `POST /strategy/start` - å¯åŠ¨ç­–ç•¥
- [ ] `POST /strategy/stop` - åœæ­¢ç­–ç•¥
- [ ] `GET /strategy/config` - è·å–ç­–ç•¥é…ç½®
- [ ] `PUT /strategy/config` - æ›´æ–°ç­–ç•¥é…ç½®

#### 2.1.4 æ•°æ®æŸ¥è¯¢æ¥å£
- [ ] `GET /strategy/trades` - è·å–äº¤æ˜“è®°å½•
- [ ] `GET /strategy/pnl` - è·å–ç›ˆäºç»Ÿè®¡

---

### 2.2 æ³¨å†Œè“å›¾
- **æ–‡ä»¶**: `backend_api_python/app/__init__.py` (æˆ–è·¯ç”±æ³¨å†Œæ–‡ä»¶)
- **é¢„è®¡å·¥æ—¶**: åŒ…å«åœ¨2.1ä¸­
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] æ³¨å†Œ `cn_futures_bp` è“å›¾
- [ ] é…ç½®URLå‰ç¼€ `/api/v1/cn-futures`

---

## é˜¶æ®µ3: å‰ç«¯APIå°è£… (P0)

### 3.1 åˆ›å»ºAPIå°è£…æ–‡ä»¶
- **æ–‡ä»¶**: `quantdinger_vue/src/api/cn_futures.js`
- **é¢„è®¡å·¥æ—¶**: 1å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] `getContracts()` - è·å–åˆçº¦åˆ—è¡¨
- [ ] `getQuote(symbol)` - è·å–å®æ—¶è¡Œæƒ…
- [ ] `getKline(symbol, timeframe, limit)` - è·å–Kçº¿
- [ ] `calculateMargin(data)` - è®¡ç®—ä¿è¯é‡‘
- [ ] `calculateFee(data)` - è®¡ç®—æ‰‹ç»­è´¹
- [ ] `getStrategyStatus()` - è·å–ç­–ç•¥çŠ¶æ€
- [ ] `startStrategy(data)` - å¯åŠ¨ç­–ç•¥
- [ ] `stopStrategy()` - åœæ­¢ç­–ç•¥
- [ ] `getStrategyConfig()` - è·å–ç­–ç•¥é…ç½®
- [ ] `updateStrategyConfig(data)` - æ›´æ–°ç­–ç•¥é…ç½®
- [ ] `getStrategyTrades(limit)` - è·å–äº¤æ˜“è®°å½•
- [ ] `getStrategyPnl(period)` - è·å–ç›ˆäºç»Ÿè®¡

---

## é˜¶æ®µ4: å‰ç«¯é¡µé¢ä¸»æ¡†æ¶ (P0)

### 4.1 åˆ›å»ºé¡µé¢ä¸»æ–‡ä»¶
- **æ–‡ä»¶**: `quantdinger_vue/src/views/futures-strategy/index.vue`
- **é¢„è®¡å·¥æ—¶**: 3å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] åˆ›å»ºé¡µé¢ç›®å½•ç»“æ„
- [ ] å®ç°é¡µé¢æ•´ä½“å¸ƒå±€ï¼ˆå‚è€ƒç°æœ‰ç­–ç•¥é¡µé¢é£æ ¼ï¼‰
- [ ] å®ç°æ•°æ®çŠ¶æ€ç®¡ç† (ref/reactive)
- [ ] å®ç°ç”Ÿå‘½å‘¨æœŸé’©å­ (onMounted)
- [ ] å®ç°è¡Œæƒ…è‡ªåŠ¨åˆ·æ–°é€»è¾‘ (5ç§’è½®è¯¢)
- [ ] å®ç°ç­–ç•¥å¯åŠ¨/åœæ­¢é€»è¾‘
- [ ] å®ç°é…ç½®ä¿å­˜é€»è¾‘

---

### 4.2 æ·»åŠ è·¯ç”±é…ç½®
- **æ–‡ä»¶**: `quantdinger_vue/src/router/index.js`
- **é¢„è®¡å·¥æ—¶**: åŒ…å«åœ¨4.1ä¸­
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] æ·»åŠ  `/futures-strategy` è·¯ç”±
- [ ] é…ç½®è·¯ç”±å…ƒä¿¡æ¯ (title, icon, requireAuth)

---

### 4.3 æ·»åŠ èœå•å…¥å£
- **æ–‡ä»¶**: èœå•é…ç½®æ–‡ä»¶
- **é¢„è®¡å·¥æ—¶**: åŒ…å«åœ¨4.1ä¸­
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] æ·»åŠ "æœŸè´§ç­–ç•¥"èœå•é¡¹
- [ ] é…ç½®èœå•å›¾æ ‡

---

## é˜¶æ®µ5: å‰ç«¯å­ç»„ä»¶å¼€å‘ (P1)

### 5.1 ContractSelector.vue - åˆçº¦é€‰æ‹©å™¨
- **æ–‡ä»¶**: `quantdinger_vue/src/views/futures-strategy/components/ContractSelector.vue`
- **é¢„è®¡å·¥æ—¶**: 1å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**åŠŸèƒ½:**
- [ ] æ˜¾ç¤º4ä¸ªè‚¡æŒ‡æœŸè´§åˆçº¦å¤é€‰æ¡† (IC0/IM0/IF0/IH0)
- [ ] æ”¯æŒå¤šé€‰
- [ ] åŒå‘ç»‘å®šé€‰ä¸­å€¼ (v-model)
- [ ] æ˜¾ç¤ºåˆçº¦åç§°

---

### 5.2 QuotePanel.vue - è¡Œæƒ…é¢æ¿
- **æ–‡ä»¶**: `quantdinger_vue/src/views/futures-strategy/components/QuotePanel.vue`
- **é¢„è®¡å·¥æ—¶**: 2å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**åŠŸèƒ½:**
- [ ] æ˜¾ç¤ºé€‰ä¸­åˆçº¦çš„å®æ—¶è¡Œæƒ…å¡ç‰‡
- [ ] æ˜¾ç¤ºï¼šæœ€æ–°ä»·ã€æ¶¨è·Œå¹…ã€åŸºå‡†ä»·ã€å½“å‰è·Œå¹…
- [ ] ä»·æ ¼é¢œè‰²æ ·å¼ï¼ˆæ¶¨ç»¿è·Œçº¢ï¼‰
- [ ] æ¥æ”¶çˆ¶ç»„ä»¶ä¼ å…¥çš„è¡Œæƒ…æ•°æ®
- [ ] å“åº”å¼å¸ƒå±€ï¼ˆå¡ç‰‡è‡ªé€‚åº”ï¼‰

---

### 5.3 StrategyPanel.vue - ç­–ç•¥æ§åˆ¶é¢æ¿
- **æ–‡ä»¶**: `quantdinger_vue/src/views/futures-strategy/components/StrategyPanel.vue`
- **é¢„è®¡å·¥æ—¶**: 2å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**åŠŸèƒ½:**
- [ ] æ˜¾ç¤ºç­–ç•¥è¿è¡ŒçŠ¶æ€ï¼ˆè¿è¡Œä¸­/å·²åœæ­¢ï¼‰
- [ ] æ˜¾ç¤ºç›‘æ§æ—¶æ®µä¿¡æ¯
- [ ] æ˜¾ç¤ºä»Šæ—¥ä¿¡å·æ•°é‡
- [ ] æ˜¾ç¤ºå½“å‰æŒä»“æ¦‚è¦
- [ ] ç­–ç•¥é…ç½®è¡¨å•ï¼š
  - [ ] ä¹°å…¥é˜ˆå€¼1 è¾“å…¥æ¡†
  - [ ] ä¹°å…¥é˜ˆå€¼2 è¾“å…¥æ¡†
  - [ ] æœ€å¤§æŒä»“æ‰‹æ•° è¾“å…¥æ¡†
  - [ ] é€šçŸ¥æ¸ é“å¤é€‰æ¡† (Telegram/æµè§ˆå™¨/å¾®ä¿¡)
  - [ ] Telegram Chat ID è¾“å…¥æ¡† (æ¡ä»¶æ˜¾ç¤º)
  - [ ] å¾®ä¿¡ Webhook è¾“å…¥æ¡† (æ¡ä»¶æ˜¾ç¤º)
- [ ] ä¿å­˜é…ç½®æŒ‰é’®

---

### 5.4 PositionTable.vue - æŒä»“è¡¨æ ¼
- **æ–‡ä»¶**: `quantdinger_vue/src/views/futures-strategy/components/PositionTable.vue`
- **é¢„è®¡å·¥æ—¶**: 1å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**åŠŸèƒ½:**
- [ ] è¡¨æ ¼åˆ—ï¼šåˆçº¦ã€æ–¹å‘ã€æ•°é‡ã€å¼€ä»“ä»·ã€ç°ä»·ã€ç›ˆäºã€ç›ˆäº%ã€å¼€ä»“æ—¶é—´
- [ ] ç›ˆäºé¢œè‰²æ ·å¼
- [ ] ç©ºæ•°æ®æç¤º
- [ ] ä¸ç°æœ‰è¡¨æ ¼æ ·å¼ä¸€è‡´

---

### 5.5 TradeHistory.vue - äº¤æ˜“è®°å½•
- **æ–‡ä»¶**: `quantdinger_vue/src/views/futures-strategy/components/TradeHistory.vue`
- **é¢„è®¡å·¥æ—¶**: 1å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**åŠŸèƒ½:**
- [ ] è¡¨æ ¼åˆ—ï¼šæ—¶é—´ã€åˆçº¦ã€ç±»å‹ã€ä»·æ ¼ã€æ•°é‡ã€ç›ˆäºã€æ‰‹ç»­è´¹
- [ ] åˆ†é¡µåŠŸèƒ½
- [ ] ä¹°å…¥/å–å‡ºç±»å‹æ ‡ç­¾æ ·å¼
- [ ] ç›ˆäºé¢œè‰²æ ·å¼

---

### 5.6 PnlChart.vue - ç›ˆäºå›¾è¡¨
- **æ–‡ä»¶**: `quantdinger_vue/src/views/futures-strategy/components/PnlChart.vue`
- **é¢„è®¡å·¥æ—¶**: 2å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**åŠŸèƒ½:**
- [ ] ç»Ÿè®¡å¡ç‰‡ï¼šæœ¬æœˆç›ˆäºã€èƒœç‡ã€äº¤æ˜“æ¬¡æ•°
- [ ] ç›ˆäºæ›²çº¿å›¾ (ECharts/å…¶ä»–å›¾è¡¨åº“)
- [ ] æ—¶é—´ç­›é€‰å™¨ (æ—¥/å‘¨/æœˆ/å¹´)
- [ ] å›¾è¡¨å“åº”å¼é€‚é…

---

## é˜¶æ®µ6: é›†æˆä¸æµ‹è¯• (P1)

### 6.1 åŠŸèƒ½æµ‹è¯•
- **é¢„è®¡å·¥æ—¶**: 1.5å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**æµ‹è¯•é¡¹:**
- [ ] åˆçº¦åˆ—è¡¨æ­£å¸¸åŠ è½½
- [ ] è¡Œæƒ…æ•°æ®æ­£å¸¸åˆ·æ–°
- [ ] ç­–ç•¥å¯åŠ¨/åœæ­¢æ­£å¸¸
- [ ] é…ç½®ä¿å­˜æ­£å¸¸
- [ ] æŒä»“æ•°æ®æ­£å¸¸æ˜¾ç¤º
- [ ] äº¤æ˜“è®°å½•æ­£å¸¸åˆ†é¡µ
- [ ] ç›ˆäºå›¾è¡¨æ­£å¸¸æ¸²æŸ“
- [ ] Telegram é€šçŸ¥æ­£å¸¸
- [ ] æµè§ˆå™¨é€šçŸ¥æ­£å¸¸
- [ ] å¾®ä¿¡é€šçŸ¥æ­£å¸¸

---

### 6.2 UI/UX éªŒæ”¶
- **é¢„è®¡å·¥æ—¶**: 0.5å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**éªŒæ”¶é¡¹:**
- [ ] ç•Œé¢é£æ ¼ä¸ç°æœ‰ç³»ç»Ÿä¸€è‡´
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸
- [ ] LoadingçŠ¶æ€æ­£å¸¸
- [ ] é”™è¯¯æç¤ºå‹å¥½

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|----------|------|
| `backend_api_python/app/models/futures.py` | æœŸè´§æ•°æ®åº“æ¨¡å‹ |
| `backend_api_python/app/routes/cn_futures.py` | æœŸè´§APIè·¯ç”± |
| `quantdinger_vue/src/api/cn_futures.js` | å‰ç«¯APIå°è£… |
| `quantdinger_vue/src/views/futures-strategy/index.vue` | é¡µé¢ä¸»æ–‡ä»¶ |
| `quantdinger_vue/src/views/futures-strategy/components/ContractSelector.vue` | åˆçº¦é€‰æ‹©å™¨ |
| `quantdinger_vue/src/views/futures-strategy/components/QuotePanel.vue` | è¡Œæƒ…é¢æ¿ |
| `quantdinger_vue/src/views/futures-strategy/components/StrategyPanel.vue` | ç­–ç•¥æ§åˆ¶é¢æ¿ |
| `quantdinger_vue/src/views/futures-strategy/components/PositionTable.vue` | æŒä»“è¡¨æ ¼ |
| `quantdinger_vue/src/views/futures-strategy/components/TradeHistory.vue` | äº¤æ˜“è®°å½• |
| `quantdinger_vue/src/views/futures-strategy/components/PnlChart.vue` | ç›ˆäºå›¾è¡¨ |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|----------|----------|
| `backend_api_python/app/__init__.py` | æ³¨å†Œcn_futuresè“å›¾ |
| `quantdinger_vue/src/router/index.js` | æ·»åŠ æœŸè´§ç­–ç•¥è·¯ç”± |
| èœå•é…ç½®æ–‡ä»¶ | æ·»åŠ æœŸè´§ç­–ç•¥èœå•é¡¹ |

---

## ğŸ”— æ¥å£ä¾èµ–å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         é¡µé¢ç»„ä»¶                                 â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ContractSelectorâ”‚ â”‚QuotePanel   â”‚ â”‚StrategyPanelâ”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚               â”‚               â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚PositionTableâ”‚ â”‚TradeHistory â”‚ â”‚  PnlChart   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚               â”‚               â”‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     å‰ç«¯APIå°è£… (cn_futures.js)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            HTTP                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     åç«¯è·¯ç”± (cn_futures.py)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚               å·²æœ‰æ¨¡å—                                   â”‚    â”‚
â”‚   â”‚  CNFuturesDataSource | FuturesCalculator               â”‚    â”‚
â”‚   â”‚  FuturesNotifier | FuturesStrategyExecutor             â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     æ•°æ®åº“æ¨¡å‹ (futures.py)                       â”‚
â”‚   FuturesStrategyConfig | FuturesPosition                        â”‚
â”‚   FuturesTrade | FuturesSignal                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… å®Œæˆæ ‡è®°è¯´æ˜

| æ ‡è®° | å«ä¹‰ |
|------|------|
| â¬œ | å¾…å¼€å‘ |
| ğŸŸ¡ | å¼€å‘ä¸­ |
| âœ… | å·²å®Œæˆ |
| âŒ | å·²å–æ¶ˆ |
| ğŸ”„ | éœ€è¿”å·¥ |

---

## ğŸ“ å¤‡æ³¨

1. **å¼€å‘é¡ºåº**: å»ºè®®æŒ‰é˜¶æ®µé¡ºåºå¼€å‘ï¼Œé˜¶æ®µ1-4ä¸ºé˜»å¡ä¾èµ–ï¼Œé˜¶æ®µ5çš„å­ç»„ä»¶å¯å¹¶è¡Œå¼€å‘
2. **UIå‚è€ƒ**: æ‰€æœ‰ç»„ä»¶çš„UIé£æ ¼å‚è€ƒç°æœ‰çš„ç­–ç•¥ç®¡ç†é¡µé¢
3. **é€šçŸ¥æ¸ é“**: å¾®ä¿¡é€šçŸ¥ä½¿ç”¨ä¼ä¸šå¾®ä¿¡æœºå™¨äººWebhookæ–¹å¼
4. **æ•°æ®åˆ·æ–°**: è¡Œæƒ…æ•°æ®æ¯5ç§’è‡ªåŠ¨åˆ·æ–°ï¼Œç­–ç•¥çŠ¶æ€æ¯10ç§’åˆ·æ–°

---

## é˜¶æ®µ7: æœŸè´§å›æµ‹åŠŸèƒ½é›†æˆ (P0)

> **æ–°å¢éœ€æ±‚**: è®©æœŸè´§ç­–ç•¥èƒ½åœ¨å‰ç«¯æŒ‡æ ‡åˆ†æé¡µé¢å®Œæ•´è¿è¡Œå›æµ‹

### 7.1 å›æµ‹å¼•æ“é›†æˆæœŸè´§è®¡ç®—å™¨
- **æ–‡ä»¶**: `backend_api_python/app/services/backtest.py`
- **é¢„è®¡å·¥æ—¶**: 2å°æ—¶
- **çŠ¶æ€**: âœ… å·²å®Œæˆ

**å­ä»»åŠ¡:**
- [x] å¯¼å…¥ `FuturesCalculator` è®¡ç®—å™¨
- [x] è¯†åˆ« `CNFutures` å¸‚åœºç±»å‹
- [ ] å›æµ‹æ—¶è‡ªåŠ¨åº”ç”¨æœŸè´§ä¿è¯é‡‘è®¡ç®—ï¼ˆ12%/10%ï¼‰
- [ ] å›æµ‹æ—¶è‡ªåŠ¨åº”ç”¨æœŸè´§æ‰‹ç»­è´¹è®¡ç®—ï¼ˆå¼€/å¹³/å¹³ä»Šï¼‰
- [ ] å›æµ‹ç»“æœåŒ…å«æœŸè´§ç‰¹æœ‰å­—æ®µï¼ˆä¿è¯é‡‘ã€æ‰‹ç»­è´¹æ˜ç»†ï¼‰

**é›†æˆé€»è¾‘:**
```python
# åœ¨ BacktestService ä¸­è¯†åˆ«æœŸè´§å¸‚åœº
if market_type == "CNFutures":
    calculator = FuturesCalculator()
    margin = calculator.calculate_margin(symbol, price)
    fee = calculator.calculate_fee(symbol, price, is_close_today)
```

---

### 7.2 å‰ç«¯æŒ‡æ ‡åˆ†æé¡µé¢æ·»åŠ æœŸè´§å¸‚åœº
- **æ–‡ä»¶**: `quantdinger_vue/src/views/indicator-analysis/index.vue`
- **é¢„è®¡å·¥æ—¶**: 1å°æ—¶
- **çŠ¶æ€**: âœ… å·²å®Œæˆ

**å­ä»»åŠ¡:**
- [x] åœ¨å¸‚åœºç±»å‹ä¸‹æ‹‰æ¡†ä¸­æ·»åŠ  `CNFutures` (ä¸­å›½æœŸè´§) é€‰é¡¹
- [x] æ·»åŠ æœŸè´§å¸‚åœºå¯¹åº”çš„å›¾æ ‡
- [x] æ›´æ–° `getMarketName()` å‡½æ•°æ”¯æŒæœŸè´§å¸‚åœºæ˜¾ç¤º

**å¸‚åœºé€‰é¡¹é…ç½®:**
```javascript
const marketOptions = [
  { value: 'USStock', label: 'ç¾è‚¡', icon: 'ğŸ‡ºğŸ‡¸' },
  { value: 'AShare', label: 'Aè‚¡', icon: 'ğŸ‡¨ğŸ‡³' },
  { value: 'HShare', label: 'æ¸¯è‚¡', icon: 'ğŸ‡­ğŸ‡°' },
  { value: 'Crypto', label: 'åŠ å¯†è´§å¸', icon: 'â‚¿' },
  { value: 'Forex', label: 'å¤–æ±‡', icon: 'ğŸ’±' },
  { value: 'CNFutures', label: 'ä¸­å›½æœŸè´§', icon: 'ğŸ“ˆ' },  // æ–°å¢
]
```

---

### 7.3 å›æµ‹æ¨¡æ€æ¡†æ”¯æŒæœŸè´§åˆçº¦
- **æ–‡ä»¶**: `quantdinger_vue/src/views/indicator-analysis/components/BacktestModal.vue`
- **é¢„è®¡å·¥æ—¶**: 1å°æ—¶
- **çŠ¶æ€**: ğŸŸ¡ éƒ¨åˆ†å®Œæˆï¼ˆåŸºç¡€åŠŸèƒ½å·²å®Œæˆï¼Œé«˜çº§åŠŸèƒ½å¾…å¼€å‘ï¼‰

**å­ä»»åŠ¡:**
- [x] æ”¯æŒè¾“å…¥ä¸»åŠ›åˆçº¦ä»£ç ï¼ˆIC0/IM0/IF0/IH0ï¼‰
- [ ] å½“é€‰æ‹© `CNFutures` å¸‚åœºæ—¶ï¼Œæ˜¾ç¤ºæœŸè´§åˆçº¦å¿«æ·é€‰æ‹©å™¨
- [ ] æ·»åŠ æœŸè´§åˆçº¦ä»£ç æ ¼å¼éªŒè¯
- [ ] æ˜¾ç¤ºæœŸè´§ç‰¹æœ‰å‚æ•°æç¤ºï¼ˆä¿è¯é‡‘æ¯”ä¾‹ã€åˆçº¦ä¹˜æ•°ï¼‰

**æœŸè´§åˆçº¦å¿«æ·é€‰æ‹©:**
```javascript
const futuresContracts = [
  { code: 'IC0', name: 'ä¸­è¯500ä¸»åŠ›', multiplier: 200, margin: 0.12 },
  { code: 'IM0', name: 'ä¸­è¯1000ä¸»åŠ›', multiplier: 200, margin: 0.12 },
  { code: 'IF0', name: 'æ²ªæ·±300ä¸»åŠ›', multiplier: 300, margin: 0.10 },
  { code: 'IH0', name: 'ä¸Šè¯50ä¸»åŠ›', multiplier: 300, margin: 0.10 },
]
```

---

### 7.4 å›æµ‹ç»“æœæ˜¾ç¤ºæœŸè´§ä¿¡æ¯
- **æ–‡ä»¶**: `quantdinger_vue/src/views/indicator-analysis/components/BacktestResults.vue`
- **é¢„è®¡å·¥æ—¶**: 1å°æ—¶
- **çŠ¶æ€**: â¬œ å¾…å¼€å‘

**å­ä»»åŠ¡:**
- [ ] æœŸè´§å›æµ‹ç»“æœæ˜¾ç¤ºä¿è¯é‡‘å ç”¨
- [ ] æœŸè´§å›æµ‹ç»“æœæ˜¾ç¤ºæ‰‹ç»­è´¹æ˜ç»†ï¼ˆå¼€ä»“/å¹³ä»“/å¹³ä»Šï¼‰
- [ ] æœŸè´§å›æµ‹ç»“æœæ˜¾ç¤ºåˆçº¦ä»·å€¼
- [ ] æœŸè´§å›æµ‹ç»“æœæ˜¾ç¤ºæ æ†å€æ•°

**æœŸè´§å›æµ‹ç»“æœå­—æ®µ:**
```javascript
// æœŸè´§ç‰¹æœ‰å›æµ‹ç»“æœ
{
  margin_used: 45000,        // ä¿è¯é‡‘å ç”¨
  fee_open: 86.25,           // å¼€ä»“æ‰‹ç»­è´¹
  fee_close: 86.25,          // å¹³ä»“æ‰‹ç»­è´¹
  fee_close_today: 1293.75,  // å¹³ä»Šæ‰‹ç»­è´¹
  contract_value: 375000,    // åˆçº¦ä»·å€¼
  leverage: 8.33,            // å®é™…æ æ†
}
```

---

### 7.5 åç«¯å›æµ‹APIæ”¯æŒæœŸè´§å‚æ•°
- **æ–‡ä»¶**: `backend_api_python/app/routes/backtest.py`
- **é¢„è®¡å·¥æ—¶**: 0.5å°æ—¶
- **çŠ¶æ€**: âœ… å·²å®Œæˆï¼ˆAPIå·²æ”¯æŒmarketå‚æ•°ä¼ é€’ï¼‰

**å­ä»»åŠ¡:**
- [x] å›æµ‹APIæ¥æ”¶ `market_type` å‚æ•°
- [ ] å½“ `market_type == "CNFutures"` æ—¶è°ƒç”¨æœŸè´§è®¡ç®—å™¨
- [ ] è¿”å›æœŸè´§ç‰¹æœ‰çš„å›æµ‹ç»“æœå­—æ®µ

---

## ğŸ“ é˜¶æ®µ7 æ–‡ä»¶æ¸…å•

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|----------|----------|
| `backend_api_python/app/services/backtest.py` | é›†æˆæœŸè´§è®¡ç®—å™¨ |
| `backend_api_python/app/routes/backtest.py` | æ”¯æŒæœŸè´§å¸‚åœºå‚æ•° |
| `quantdinger_vue/src/views/indicator-analysis/index.vue` | æ·»åŠ CNFutureså¸‚åœºé€‰é¡¹ |
| `quantdinger_vue/src/views/indicator-analysis/components/BacktestModal.vue` | æ”¯æŒæœŸè´§åˆçº¦è¾“å…¥ |
| `quantdinger_vue/src/views/indicator-analysis/components/BacktestResults.vue` | æ˜¾ç¤ºæœŸè´§å›æµ‹ä¿¡æ¯ |

---

## ğŸ”— é˜¶æ®µ7 ä¾èµ–å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœŸè´§å›æµ‹åŠŸèƒ½é›†æˆ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     å‰ç«¯æ”¹é€                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚å¸‚åœºé€‰é¡¹æ·»åŠ   â”‚ â”‚åˆçº¦é€‰æ‹©å™¨    â”‚ â”‚å›æµ‹ç»“æœå±•ç¤º     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚(index.vue)  â”‚ â”‚(BacktestModal)â”‚ â”‚(BacktestResults)â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                    â”‚
â”‚                             â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     åç«¯æ”¹é€                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚            å›æµ‹å¼•æ“ (backtest.py)                â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                      â”‚                          â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                      â–¼                          â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚      æœŸè´§è®¡ç®—å™¨ (futures_calculator.py)  â”‚   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  - ä¿è¯é‡‘è®¡ç®—                           â”‚   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  - æ‰‹ç»­è´¹è®¡ç®—                           â”‚   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  - ç»“ç®—ä»·VWAP                           â”‚   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  - æ¶¨è·Œåœæ£€æµ‹                           â”‚   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                    â”‚
â”‚                             â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   å·²æœ‰æ¨¡å— (å·²å®Œæˆ)                       â”‚    â”‚
â”‚  â”‚  CNFuturesDataSource | FuturesCalculator | FuturesNotifier  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*æœ€åæ›´æ–°: 2026-02-05*
